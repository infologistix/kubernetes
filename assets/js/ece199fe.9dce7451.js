"use strict";(self.webpackChunkkubernetes=self.webpackChunkkubernetes||[]).push([[461],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>p});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),u=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return i.createElement(s.Provider,{value:n},e.children)},c="mdxType",k={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},h=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),c=u(t),h=r,p=c["".concat(s,".").concat(h)]||c[h]||k[h]||l;return t?i.createElement(p,o(o({ref:n},d),{},{components:t})):i.createElement(p,o({ref:n},d))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=h;var a={};for(var s in n)hasOwnProperty.call(n,s)&&(a[s]=n[s]);a.originalType=e,a[c]="string"==typeof e?e:r,o[1]=a;for(var u=2;u<l;u++)o[u]=t[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}h.displayName="MDXCreateElement"},9068:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>k,frontMatter:()=>l,metadata:()=>a,toc:()=>u});var i=t(7462),r=(t(7294),t(3905));const l={slug:"docker-in-wsl",title:"Docker in WSL",authors:["aviphan","gerhards","graap","schmidt"],tags:["Docker","WSL"]},o=void 0,a={permalink:"/kubernetes/blog/docker-in-wsl",source:"@site/blog/2022-01-27-docker-in-wsl.md",title:"Docker in WSL",description:"Docker Desktop wird kostenplichtig. Wir zeigen Ihnen eine kostenfreie Alternative - Docker im Windows Subsystem for Linux (WSL)",date:"2022-01-27T00:00:00.000Z",formattedDate:"January 27, 2022",tags:[{label:"Docker",permalink:"/kubernetes/blog/tags/docker"},{label:"WSL",permalink:"/kubernetes/blog/tags/wsl"}],readingTime:4.425,hasTruncateMarker:!0,authors:[{name:"Suphanat Avipan",title:"IT Consultant",url:"https://github.com/suphanataviphan",imageURL:"https://github.com/suphanataviphan.png",key:"aviphan"},{name:"Harald P. Gerhards",title:"Senior IT Consultant | Head of Cloud Engineering",url:"https://github.com/HPG84",imageURL:"https://github.com/HPG84.png",key:"gerhards"},{name:"Nico Graap",title:"IT Consultant",url:"https://github.com/Nico-infologistix",imageURL:"https://github.com/Nico-infologistix.png",key:"graap"},{name:"Paul Schmidt",title:"Data Scientist",url:"https://github.com/pickmylight",imageURL:"https://github.com/pickmylight.png",key:"schmidt"}],frontMatter:{slug:"docker-in-wsl",title:"Docker in WSL",authors:["aviphan","gerhards","graap","schmidt"],tags:["Docker","WSL"]},prevItem:{title:"Testdaten Sampling",permalink:"/kubernetes/blog/testdata"},nextItem:{title:"Use Case f\xfcr einen WebCrawler",permalink:"/kubernetes/blog/webcrawler"}},s={authorsImageUrls:[void 0,void 0,void 0,void 0]},u=[{value:"Docker Desktop wird kostenpflichtig",id:"docker-desktop-wird-kostenpflichtig",level:4},{value:"Docker Deamon und Docker Client weiterhin free and open source (FOSS)",id:"docker-deamon-und-docker-client-weiterhin-free-and-open-source-foss",level:4},{value:"Neue Wege unter Windows mit infologistix",id:"neue-wege-unter-windows-mit-infologistix",level:4},{value:"Los geht\u2019s",id:"los-gehts",level:3},{value:"Installation von WSL2",id:"installation-von-wsl2",level:5},{value:"Aktuelle Builds",id:"aktuelle-builds",level:5},{value:"\xc4ltere Builds",id:"\xe4ltere-builds",level:5},{value:"Infologistix Docker Installer f\xfcr WSL2",id:"infologistix-docker-installer-f\xfcr-wsl2",level:3},{value:"Installation",id:"installation",level:5},{value:"Nutzung von Docker unter Windows",id:"nutzung-von-docker-unter-windows",level:5},{value:"Deinstallation",id:"deinstallation",level:5},{value:"Fazit",id:"fazit",level:3}],d={toc:u},c="wrapper";function k(e){let{components:n,...l}=e;return(0,r.kt)(c,(0,i.Z)({},d,l,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Docker Desktop wird kostenplichtig. Wir zeigen Ihnen eine kostenfreie Alternative - Docker im Windows Subsystem for Linux (WSL)"),(0,r.kt)("p",null,"Die kostenfreien Produkte von Docker werden von Millionen Entwicklern verwendet, um Anwendungen zu erstellen, zu ver\xf6ffentlichen und auszuf\xfchren \u2013 in Rechenzentren, der public cloud oder mit Docker Desktop auf dem lokalen PC. 55% der Entwickler nutzen Docker jeden Tag bei der Arbeit."),(0,r.kt)("h4",{id:"docker-desktop-wird-kostenpflichtig"},"Docker Desktop wird kostenpflichtig"),(0,r.kt)("p",null,"Doch die Firma Docker muss auch wirtschaftlich arbeiten und hat beschlossen, im Rahmen einer Umgestaltung des Gesch\xe4ftsmodells Geb\xfchren f\xfcr Unternehmenskunden zu erheben. Ab dem 31.01.2022 wird jegliche Nutzung von Docker Desktop f\xfcr Nutzer in Unternehmen mit mehr als 250 Besch\xe4ftigten oder einem Jahresumsatz von mehr als 10 Millionen Dollar kostenpflichtig sein. Ein Abonnement kostet dann je nach weiten genutzten Diensten und Zahlungsweise zwischen 7$ und 21$ pro Nutzer und Monat. F\xfcr Unternehmen und Beh\xf6rden stellt sich daher die Frage, ob Docker Desktop die monatliche Geb\xfchr wert ist oder ob es andere Optionen gibt."),(0,r.kt)("h4",{id:"docker-deamon-und-docker-client-weiterhin-free-and-open-source-foss"},"Docker Deamon und Docker Client weiterhin free and open source (FOSS)"),(0,r.kt)("p",null,"Der Docker Software Stack besteht neben der zuk\xfcnftig kostenpflichtigen GUI aus kostenfreien, quelloffenen Komponenten, die die eigentliche Arbeit machen. Der Docker-Client ist ein Befehlszeilendienstprogramm, das die API des Docker Daemon bedient. Der Docker Deamon bildet das Herzst\xfcck der Container Laufzeitumgebung. Unter Linux k\xf6nnen diese nativ und kostenfrei installiert und genutzt werden."),(0,r.kt)("h4",{id:"neue-wege-unter-windows-mit-infologistix"},"Neue Wege unter Windows mit infologistix"),(0,r.kt)("p",null,"Unter Microsoft Windows 10 und Windows 11 muss man hingegen einen etwas aufw\xe4ndigeren Weg beschreiten, um dem Lizensierungsmodell zu entgehen und Docker weiterhin kostenfrei auf dem lokalen PC zu nutzen. Aber wir von infologistix haben die Verwaltung dieser Tools so einfach gemacht wie die Nutzung des Internets. Von gro\xdfen Rechenzentren abgeschaut, in denen Linux Server Docker als FOSS ausf\xfchren, nutzen wir ebendiese Tools f\xfcr die lokalen Entwicklungsumgebung."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Wir haben die Installation von Docker so einfach gestaltet, dass nach der Aktivierung und Installation des Windows Subsystem f\xfcr Linux nur noch ein Installationsprogramm ausgef\xfchrt werden muss. Als Bonus k\xf6nnen Sie den Docker-Client selbst auf Ihrem lokalen Rechner installieren, indem Sie ihn herunterladen und einen Docker-Kontext konfigurieren, um die intern gehostete Docker-Plattform auf Windows Subsystem f\xfcr Linux zu benutzen.")),(0,r.kt)("h3",{id:"los-gehts"},"Los geht\u2019s"),(0,r.kt)("h5",{id:"installation-von-wsl2"},"Installation von WSL2"),(0,r.kt)("p",null,"Der erste Schritt um auch unter Windows 10 oder Windows 11 Docker native auf einem Linux Kernel laufen zu lassen ist die Aktivierung des neuen Windows Subsystem for Linux (WSL2):"),(0,r.kt)("h5",{id:"aktuelle-builds"},"Aktuelle Builds"),(0,r.kt)("p",null,"Wenn Sie Windows 10, Version 2004 und h\xf6her (Build 19041 und h\xf6her), oder Windows 11 ausf\xfchren k\xf6nnen Sie einfach Ihre Power Shell als Administrator \xf6ffnen und folgenden Befehl ausf\xfchren:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ wsl --install\n")),(0,r.kt)("p",null,"Dieser Befehl aktiviert die erforderlichen optionalen Windows Komponenten, l\xe4dt den aktuellen Linux-Kernel herunter, legt WSL 2 als Standard fest und installiert eine Linux-Distribution f\xfcr Sie (standardm\xe4\xdfig Ubuntu). Um die installierte Distribution zu \xe4ndern, geben Sie Folgendes ein:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ wsl --install -d <Distribution Name>\n")),(0,r.kt)("p",null,"Ersetzen Sie < Distribution Name >  durch den Namen der Distribution, die Sie installieren m\xf6chten."),(0,r.kt)("h5",{id:"\xe4ltere-builds"},"\xc4ltere Builds"),(0,r.kt)("p",null,"Windows 10 biete ab dem Fall Creators Update (Version 1709) das Windows Subsystem for Linux (WSL) in der Version 1 an. WSL2 ist nach erweiterter Abw\xe4rtskompatibilit\xe4t ab Build 18363.1049 verf\xfcgbar. F\xfcr die folgenden Schritte beziehen wir uns immer auf die 64-Bit Variante der PowerShell."),(0,r.kt)("p",null,"Als erstes muss WSL als Windows Feature aktiviert werden. Rufen Sie dazu die PowerShell als Administrator auf und aktivieren sie das Feature:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n")),(0,r.kt)("p",null,"Vor der Installation von WSL 2 m\xfcssen Sie das optionale Feature Plattform des virtuellen Computers aktivieren."),(0,r.kt)("p",null,"\xd6ffnen Sie die PowerShell als Administrator und f\xfchren Sie Folgendes aus:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n")),(0,r.kt)("p",null,"Starten Sie anschlie\xdfend den Rechner neu."),(0,r.kt)("p",null,"Installieren Sie nun das WSL-Update-Paket. Hierzu laden Sie das aktuelle Update-Paket unter ",(0,r.kt)("a",{parentName:"p",href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi"},"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi")," herunter. F\xfchren Sie das im vorherigen Schritt heruntergeladene Updatepaket aus."),(0,r.kt)("p",null,"Starten Sie nun eine PowerShell (ohne Administratorrechte) und f\xfchren Sie Folgendes aus um WSL2 als Standardversion zu setzen"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ wsl --set-default-version 2\n")),(0,r.kt)("p",null,"\xd6ffnen Sie den Microsoft Store, und w\xe4hlen Sie Ihre bevorzugte Linux-Distribution aus. Unser Skript und das hier beschriebene Vorgehen unterst\xfctzt:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Debian"),(0,r.kt)("li",{parentName:"ul"},"Ubuntu"),(0,r.kt)("li",{parentName:"ul"},"OpenSUSE")),(0,r.kt)("p",null,"Wenn Sie eine neu installierte Linux-Distribution zum ersten Mal starten, wird ein Konsolenfenster ge\xf6ffnet, und Sie werden aufgefordert, zu warten, bis die Dateien dekomprimiert und auf dem Computer gespeichert wurden. Alle zuk\xfcnftigen Starts sollten weniger als eine Sekunde in Anspruch nehmen."),(0,r.kt)("h3",{id:"infologistix-docker-installer-f\xfcr-wsl2"},"Infologistix Docker Installer f\xfcr WSL2"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Aufbau der infologistix Docker L\xf6sung",src:t(3927).Z,width:"607",height:"409"}),"\nAbbildung: Aufbau der infologistix Docker L\xf6sung"),(0,r.kt)("h5",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Docker kann mit folgendem Bash-Befehl innerhalb der WSL2 installiert werden:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ bash <(curl -fsSL https://raw.githubusercontent.com/infologistix/docker-wsl2/main/install.sh)\n")),(0,r.kt)("h5",{id:"nutzung-von-docker-unter-windows"},"Nutzung von Docker unter Windows"),(0,r.kt)("p",null,"Unter Windows ist die Pfadvariable hinzuzuf\xfcgen. Der Installer installier einen Docker Client nach ",(0,r.kt)("strong",{parentName:"p"},"C:\\Docker\\docker.exe"),". Dieser Pfad muss einmalig angegeben werden, dann ist Docker auch in Windows vorhanden."),(0,r.kt)("p",null,"Die Benutzung erfolgt dann mit einem docker context:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ docker context create wsldocker --docker host=tcp://localhost:2375\n$ docker context use wsldocker\n")),(0,r.kt)("h5",{id:"deinstallation"},"Deinstallation"),(0,r.kt)("p",null,"Docker kann mit folgendem Bash-Befehl innerhalb der WSL2 deinstalliert werden:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ bash <(curl -fsSL https://raw.githubusercontent.com/infologistix/docker-wsl2/main/uninstall.sh)\n")),(0,r.kt)("h3",{id:"fazit"},"Fazit"),(0,r.kt)("p",null,"Zusammenfassend haben wir haben einen Installer f\xfcr die Ausf\xfchrung von Docker in einer Windows Subsystem f\xfcr Linux-Umgebung kombiniert und erstellt. Der daraus resultierende Installer, zus\xe4tzliche Konfiguration und Dokumentation finden Sie in unserem GitHub Repository:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/infologistix/docker-wsl2"},"infologistix/docker-wsl2: Simple and fast Docker Integration in WSL2 without using Docker Desktop. Suitable for large enterprises")))}k.isMDXComponent=!0},3927:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/docker-wsl-aufbau-4aa218026063c6a3248c2ac665625aa4.png"}}]);