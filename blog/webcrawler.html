<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Use Case for a WebCrawler | KubeSpectra</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://infologistix.github.io/kubernetes/blog/webcrawler"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Use Case for a WebCrawler | KubeSpectra"><meta data-rh="true" name="description" content="WebCrawlers are a simple, effective and inexpensive way to search websites for specific information and make it available in compressed form. The programs are thus ideally suited to perform repetitive tasks."><meta data-rh="true" property="og:description" content="WebCrawlers are a simple, effective and inexpensive way to search websites for specific information and make it available in compressed form. The programs are thus ideally suited to perform repetitive tasks."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-07-12T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="Python3,Azure"><link data-rh="true" rel="icon" href="/kubernetes/img/logo_kubespectra.png"><link data-rh="true" rel="canonical" href="https://infologistix.github.io/kubernetes/blog/webcrawler"><link data-rh="true" rel="alternate" href="https://infologistix.github.io/kubernetes/blog/webcrawler" hreflang="en"><link data-rh="true" rel="alternate" href="https://infologistix.github.io/kubernetes/blog/webcrawler" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kubernetes/blog/rss.xml" title="KubeSpectra RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kubernetes/blog/atom.xml" title="KubeSpectra Atom Feed"><link rel="stylesheet" href="/kubernetes/assets/css/styles.8ee59dea.css">
<link rel="preload" href="/kubernetes/assets/js/runtime~main.4309a0e6.js" as="script">
<link rel="preload" href="/kubernetes/assets/js/main.8bfd4c6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kubernetes/"><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" href="/kubernetes/docs/projects">Projects</a><a class="navbar__item navbar__link" href="/kubernetes/docs/service">Service</a><a class="navbar__item navbar__link" href="/kubernetes/docs/team">Team</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kubernetes/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/kubernetes/blog/testdata">Test data sampling</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/kubernetes/blog/lecture">First Lecture of Cloud Native Computing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/kubernetes/blog/data-Replication">Data Replication with Confluent Cloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/kubernetes/blog/docker-in-wsl">Docker in WSL</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/kubernetes/blog/webcrawler">Use Case for a WebCrawler</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Use Case for a WebCrawler</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-07-12T00:00:00.000Z" itemprop="datePublished">July 12, 2021</time> · <!-- -->8 min read</div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>WebCrawlers are a simple, effective and inexpensive way to search websites for specific information and make it available in compressed form. The programs are thus ideally suited to perform repetitive tasks.
In this article, we present a use case for a WebCrawler and give you a detailed how-to on setting up a cloud-based Docker.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="webcrawler---use-case">WebCrawler - Use Case<a href="#webcrawler---use-case" class="hash-link" aria-label="Direct link to WebCrawler - Use Case" title="Direct link to WebCrawler - Use Case">​</a></h3><p>WebCrawlers are lightweight and cost-effective data collectors that give you an information edge. Nowadays, (almost) all information is available online. Googling has become synonymous with finding information, from a simple cooking recipe to a scientific paper.</p><p>Most of this data is freely available and can be easily accessed. However, the sheer volume of data and websites makes a search very time-consuming and labor-intensive. The time required is particularly important if the search is not to be carried out just once, but on a regular basis, so that changes and developments can be monitored. Here, so-called WebCrawlers offer themselves as a simple and, above all, cost-efficient way to automate the search.</p><p>WebCrawlers are programs that automatically search the Internet and analyze websites. They are therefore perfectly suited for repetitive tasks.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4><p>At infologistix GmbH, we use WebCrawler for various tasks, including monitoring public tender sites and filtering out the tenders that are of interest to us. For this purpose we crawl about two dozen different websites of public authorities, companies and portals. Here, crawling means that a cloud-based <u>Docker</u> calls up the pages one after the other, searches them for interesting tenders and provides us with a result list containing only relevant tenders. Technical details, as well as the Docker image and instructions for rebuilding it, can be found in the <a href="#webcrawler---how-to">How-To section</a> below.</p><p>The results list of relevant RFPs represents a huge time and cost savings for us. Instead of having to search through hundreds of RFPs per day, we now only have to review half a dozen RFPs. And this at only about 1€ operating costs per week for the WebCrawler.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resumé">Resumé<a href="#resumé" class="hash-link" aria-label="Direct link to Resumé" title="Direct link to Resumé">​</a></h4><p>WebCrawlers are a simple, effective and inexpensive way to search websites for specific information and to make the results available in compressed form. Our Docker image is a particularly lightweight and easy-to-use variant. If you have any questions about WebCrawlers or are looking for a customized solution, please feel free to contact us.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="webcrawler---how-to">WebCrawler - How-To<a href="#webcrawler---how-to" class="hash-link" aria-label="Direct link to WebCrawler - How-To" title="Direct link to WebCrawler - How-To">​</a></h3><p>With this How-To we show how to set up a cloud-based Docker to crawl websites for information and provide prepared search results via notification over social chat like MS Teams or Slack or even email.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-you-need">What you need<a href="#what-you-need" class="hash-link" aria-label="Direct link to What you need" title="Direct link to What you need">​</a></h4><ul><li>Local Docker runtime</li><li>Social chat (MS Teams, Slack) or email client</li><li><a href="https://hub.docker.com/r/infologistix/docker-selenium-python" target="_blank" rel="noopener noreferrer">infologistix WebCrawler from Docker Hub</a></li><li>Some experience with <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python</a>, Command Line, HTML</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-using-in-the-cloud-optionally">For using in the cloud optionally:<a href="#for-using-in-the-cloud-optionally" class="hash-link" aria-label="Direct link to For using in the cloud optionally:" title="Direct link to For using in the cloud optionally:">​</a></h4><ul><li><a href="https://azure.microsoft.com/en-us/" target="_blank" rel="noopener noreferrer">Microsoft Azure</a></li><li><a href="https://aws.amazon.com/" target="_blank" rel="noopener noreferrer">Amazon AWS</a></li><li><a href="https://cloud.google.com/" target="_blank" rel="noopener noreferrer">Google Cloud Platform</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-started">Let&#x27;s get started<a href="#lets-get-started" class="hash-link" aria-label="Direct link to Let&#x27;s get started" title="Direct link to Let&#x27;s get started">​</a></h4><u> 0. Clone GitHub repository </u><p>This How-To is based on a project structure, which we have already created and which you can transfer directly into your project. Under the following link you can also find this how-to as a <strong>finished program in the Examples folder.</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ git clone https://github.com/infologistix/docker-selenium-python.git ./infologistix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s look at a simple example here and first find out what services our company offers. The functions shown here can be easily adapted to new circumstances.</p><u> 1. Basic structure and libraries </u><p>The test framework Selenium already provides us with a wide range of functions and equipment to target websites and to determine information. The basic structure of our project is based on a class that handles the communication with the browser and extracts all data from the website for us. In addition, we use pandas as a tool for formatting and data analysis of the search results.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from selenium.webdriver import Chrome</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from selenium.webdriver import ChromeOptions </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from selenium.webdriver.support.ui import WebDriverWait</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from selenium.webdriver.common.by import By</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from selenium.webdriver.support import expected_conditions as EC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import pandas as pd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Based on the libraries used, we can write a base class for our crawler. This base class describes the general crawler. We use the class representation, because here the website and its functions and element extraction can be called as variables and functions. Initially, we hereby open a Chrome window in &quot;headless&quot; mode and open the given web page.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">class InfologistixCrawler():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self, url: str, headless: bool=True) -&gt; None:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options = ChromeOptions()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options.add_argument(&quot;–no-sandbox&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options.add_argument(&quot;–window-size=1280,720&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if headless:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            options.add_argument(&quot;–headless&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver = Chrome(options=options)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver.get(url)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def run(self):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        page = self.driver.page_source</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.close()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return page</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def close(self):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver.close()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><u> 2. Determine information of the website </u><p>We filter out the services offered from our own <a href="https://infologistix.de/" target="_blank" rel="noopener noreferrer">homepage</a> and want to store them with name, details and reference. To do this, we look for the information on the website and determine the basic HTML structure. In our case, the services are in a &#x27;section&#x27; element, which we need to find. Our searched element has the ID &#x27;services&#x27;, which in turn contains several &#x27;section&#x27; elements with the class attribute &#x27;elementor-image-box-content&#x27;. All the services are stored here.</p><p>First, we wait until the element we are looking for exists. We use WebDrverWait to tell our program to wait a maximum of 10 seconds for our requested element to be present on the web page in the DOM. If this element is not present, then we get out of the running program here and we don&#x27;t run into any errors.</p><p>Then we save the container with the searched elements using the find_element_by<!-- -->*<!-- --> function and search within this container with find_elements_by* all searched elements and extract the single information of the extraction.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">def getServices(self) -&gt; list:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        results = list()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        WebDriverWait(self.driver, 10).until(EC.presence_of_element_located((By.ID, &quot;Leistungen&quot;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        services = self.driver.find_element_by_id (&quot;Leistungen&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for service in services.find_elements_by_tag_name(&quot;section&quot;):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            results.append(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 self.__extract(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                          service.find_element_by_class_name(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   &quot;elementor-image-box-content&quot;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         return results</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As a result we get a list, which we only have to return. What exactly the function __extract() does, we will explain in a moment.</p><p>With the help of the list we can now develop a representation of the individual services, which simplifies the visibility and readability for humans. We choose here the representation of a Pandas DatenFrames, because here, for example, numerical calculations and aggregations can be made. In addition, Excel files can also be created from this. So we create a DataFrame with the columns &quot;URI&quot;, &quot;Title&quot; and &quot;Description&quot; from our list, which contains the title, description and the respective reference.</p><p>A DataFrame is then returned.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">def makeFrame(self, services: list) -&gt; pd.DataFrame:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return pd.DataFrame(services)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Based on this transformation of the results, we rearrange our run() function so that it gives us the results it finds and includes the functions it creates.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">def run(self):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     services = self.getServices()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     self.close()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     return self.makeFrame(services)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s remember back to our __extract() function. Here we want to extract the required information from the elements. Finding out and filtering relevant information is the main task here. All the information is present in different elements with different identifiers. For example, the title is text within an &#x27;a&#x27; element, which also contains the reference. In our example, the extraction function is composed as follows and returns us an ordered dictionary containing the element information.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">def __extract(self, service: WebElement) -&gt; dict:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;URI&quot;: service.find_element_by_tag_name(&quot;a&quot;).get_attribute(&quot;href&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;Title&quot;: service.find_element_by_tag_name(&quot;a&quot;).text,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;Description&quot;: service.find_element_by_tag_name(&quot;p&quot;).text,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The entire class with functions then looks like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">class InfologistixCrawler():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self, url, headless=False):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options = ChromeOptions()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options.add_argument(&quot;–no-sandbox&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options.add_argument(&quot;–window-size=1280,720&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if headless:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            options.add_argument(&quot;–headless&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver = Chrome(options=options)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver.get(url)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def getServices(self) -&gt; list:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        results = list()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        WebDriverWait(self.driver, 10).until(EC.presence_of_element_located((By.ID, &quot;Leistungen&quot;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        services = self.driver.find_element_by_id (&quot;Leistungen&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for service in services.find_elements_by_tag_name(&quot;section&quot;):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            results.append(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 self.__extract(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                          service.find_element_by_class_name(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   &quot;elementor-image-box-content&quot;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return results</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __extract(self, service: WebElement) -&gt; dict:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;URI&quot;: service.find_element_by_tag_name(&quot;a&quot;).get_attribute(&quot;href&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;Title&quot;: service.find_element_by_tag_name(&quot;a&quot;).text,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &quot;Description&quot;: service.find_element_by_tag_name(&quot;p&quot;).text,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def makeFrame(self, services : list) -&gt; pd.DataFrame:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return pd.DataFrame(services)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def run(self) -&gt; pd.DataFrame:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        services = self.getServices()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.close()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return self.makeFrame(services)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def close(self) -&gt; None:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.driver.close()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we let our crawler run, we get a DataFrame with the offered services of infologistix GmbH.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">services = Crawler(url=&quot;https://infologistix.de&quot;).run()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can now extract the infologistix GmbH services from the website and output them as a dataframe. The next step is the transmission of the results.</p><u> 3. Submission &amp; Messaging </u>For Teams, as well as Slack, a token and webhook respectively is used to send a formatted message to a channel. Unfortunately, the integration of Slack is not yet fully implemented and can therefore lead to errors.<p><a href="https://dev.outlook.com/Connectors/GetStarted#creating-messages-through-office-365-connectors-in-microsoft-teams" target="_blank" rel="noopener noreferrer">Here you can find detailed instructions on how to get a webhook of a channel in MS Teams.</a></p><p>Here we use the base library pymsteams and create a card with the webhook URL available to us. We add a title and the search results formatted as HTML to the post and send it to our Teams channel.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import pymsteams</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">message = services.to_html()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">title = &quot;Dienstleistungen Infologistix&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def sendMSTeams(webhook : str, message : str, title : str) -&gt; Literal[True]:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    channel = pymsteams.connectorcard(webhook)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    channel.title(title)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    channel.text(message)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return channel.send()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have now planned our flow and can save it as main.py.</p><u> 4. Cloud-Container </u>With the script created here, we can now create a Docker container, which will give us the ability to run the crawler in the cloud. For this, we create the Dockerfile or take the already existing example.<p>A simple command is enough here to run this example.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker run -it –rm –shm-size=128m docker-selenium-python:latest python ./examples/main.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find instructions for setting up in the cloud environment here:</p><ul><li><a href="https://learn.microsoft.com/de-de/azure/container-instances/container-instances-tutorial-prepare-app" target="_blank" rel="noopener noreferrer">Microsoft Azure</a></li><li><a href="https://us-east-1.signin.aws.amazon.com/oauth?SignatureVersion=4&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=ASIAQHJ3VXZJKWI3EBO4&amp;X-Amz-Date=2023-05-15T15%3A08%3A10.140Z&amp;X-Amz-Security-Token=IQoJb3JpZ2luX2VjEO%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCIQChMDyBnLd2%2F6pRONs4Qt%2ByvBbsOpAnL9akqgT%2FbmPzHQIgQDYigveW%2FZwaS10R4VZkdtTA08gEFv%2FXedWIz5r%2ByhkqzQMIGBACGgwwMTU2OTQ0MTMzOTQiDHXEpnkLczxPEFM%2B1SqqAzRfwLNltRQTxPe6NJdMLiwSKoLDoKdz0cfX%2B3V1qQ9SLmVKLxC3Ar3a7JNJzQ2P%2Fj7nrb5FGWM2FhQ8GUt6Zr1YE%2F%2FqvVm1%2FESeKDWHlsJMg0fF8IxeY9vQSVPE59zHD4IP94QeLfiHQPY0zO8fIY98FH6SBw18a%2FJh4AbGv20QF92lXwqVVJlmeyfdKdOTP9%2FjPwAZV1F8FItFqkqkOb8r8p8QwvPEDPr%2B0CqOdOQ631qdOtT%2FBYsOcXcvqBxeAyx1ud2SsvHC1bxG7eFdUGPrigT%2B08LU6rWtabEzNFFsVHzYV45K4o56JTO8%2BeFeKgri7N5qAINjmWAKzBRpSvF2zLx8i5Y%2BLYLx278yZwaNRSTCj%2FzaDkI%2BSP1cqU2qLStDbjXD51CrA3RSVxMjUn7%2BqqF48ynxogK2gsPeNAXSpt4RUwen28SINrnzw6ajQHxU3bxKa8pHx4sIe%2Fq6%2BmsHNdwP9EJsQ5WT0Dsd16F29IVrSfOPbN7azqPuCmVT5HmXtC13WsltPEHL4LHYlGCNqWQy2yIe0ivXLdoEmTEl1aIzwUpWCi0uEjDUgYmjBjqhAYubtfW9U3AJzxe55%2FXr2Ps%2FTiqGV8tWTNhFESUbyVKKXPXeFrbvrQd%2BXNUhXekARqS4aqbyiqmNxy3HyoxWFXnQkIrZHNZfj8kORXtj6QpWwGtYi7J5kh9TOAyW1GASQpj5CLuk8LnvsBLsAqmdSmuxD69GwoaZ1%2FqcSd441OA1uIiaYjeVM4MAU7Z%2F5hKmgLFacJZwD7UaHq7BNIjt2YZ8&amp;X-Amz-Signature=88941b4e1ab60b16a86d29aa30169819c908f3b5558268f10040ef6c273940e1&amp;X-Amz-SignedHeaders=host&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fecs&amp;code_challenge=Rzvs-__JFcYEHVU8L8WkBiXx4NhaNcxiZN2krlbe1XQ&amp;code_challenge_method=SHA-256&amp;redirect_uri=https%3A%2F%2Fus-east-1.console.aws.amazon.com%2Fecs%2Fhome%3Fregion%3Dus-east-1%26state%3DhashArgs%2523%252FgetStarted%26isauthcode%3Dtrue&amp;region=us-east-1&amp;response_type=code&amp;state=hashArgs%23%2FgetStarted" target="_blank" rel="noopener noreferrer">Amazon AWS</a></li><li><a href="https://cloud.google.com/container-registry/docs/pushing-and-pulling?hl=de" target="_blank" rel="noopener noreferrer">Google Cloud Services</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/kubernetes/blog/tags/python-3">Python3</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/kubernetes/blog/tags/azure">Azure</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/kubernetes/blog/docker-in-wsl"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Docker in WSL</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#webcrawler---use-case" class="table-of-contents__link toc-highlight">WebCrawler - Use Case</a></li><li><a href="#webcrawler---how-to" class="table-of-contents__link toc-highlight">WebCrawler - How-To</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://infologistix.de/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/kubernetes/img/Infologistix2020_logo.png" alt="infologistix logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="82" height="42.8" style="float:right"><img src="/kubernetes/img/Infologistix2020_logo.png" alt="infologistix logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="82" height="42.8" style="float:right"></a></div><div class="footer__copyright">Copyright © 2023 <a href="https://infologistix.de/">infologistix GmbH</a>, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/kubernetes/assets/js/runtime~main.4309a0e6.js"></script>
<script src="/kubernetes/assets/js/main.8bfd4c6f.js"></script>
</body>
</html>